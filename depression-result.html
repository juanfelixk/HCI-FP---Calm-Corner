<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Result</title>
    <link rel="icon" type="image/x-icon" href="logo.ico">
    <link href='https://fonts.googleapis.com/css?family=Montserrat' rel='stylesheet'>
    <link rel="stylesheet" href="result.css">
    <script src="https://kit.fontawesome.com/e5693bed51.js" crossorigin="anonymous"></script>
    <link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet">
    <script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>
</head>
<body>
    <div class="nav">
        <a class="logo" href="index.html">
            <img src="logo.png">
            <b>Calm Corner</b>
        </a>
        <div class="nav-menu" id="removeDropdown">
            Take Screening
            <div class="dropdown-content">
                <a href="depression-test.html">Depression Test</a>
                <a href="anxiety-test.html">Anxiety Test</a>
                <a href="adhd-test.html">ADHD Test</a>
            </div>
        </div>
        <a href="challenge.html" class="nav-menu">Weekly Challenges</a>
        <a href="sharestory.html" class="nav-menu">Share a Story</a>
        <i class="fa-solid fa-bars" id="bar-icon"></i>
    </div>

    <div class="dropdown" id="dropdown-menu">
        <ul>
            <li class="dropdown-mobile">Take Screening</li>
            <ul class="dropdown-content-mobile">
                <a href="depression-test.html"><li><i class="fa-solid fa-angle-right"></i>Depression Test</li></a>
                <a href="anxiety-test.html"><li><i class="fa-solid fa-angle-right"></i>Anxiety Test</li></a>
                <a href="adhd-test.html"><li><i class="fa-solid fa-angle-right"></i>ADHD Test</li></a>
            </ul>
            <a href="challenge.html"><li>Weekly Challenges</li></a>
            <a href="sharestory.html"><li>Share a Story</li></a>
        </ul>
    </div>

    <div class="title">
        <h2>Your Result for Depression Test</h2>
        <div class="result-title" id="resultName">???</div>
        <p>
            Based on the result of your screening, you are diagnosed with <span id="resultDiagnosis">???</span> symptoms of depression. 
            Please note that this is not a final diagnosis. A further consultation with your doctor or therapist is encouraged.
        </p>
        <form id="sendResult" class="send-result-form">
            <input type="email" id="userEmail" placeholder="Enter your email address" required><br>
            <input type="hidden" id="emailResult">
            <button type="submit">Send Results</button>
        </form>
    </div>

    <div class="learn-more" id="mobileAnimation">
        <h1>What to do next?</h1>
        <a class="learn-more-btn" href="#desc">Learn more about depression</a><br>
        <a class="learn-more-btn" href="#medication">Find a suitable medication</a><br>
        <a class="learn-more-btn" href="#support">Find local support</a><br>
        <a class="learn-more-btn" onclick="openModal('modal')">I don't want to live, but I don't want to die</a>
    </div>

    <div id="modal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeModal('modal')">&times;</span>
            <div class="modal-text">
                <h2>Crisis Support and Resources</h2>
                <p>
                    Talk to Someone You Trust<br><br>
                    Whether it's a friend, family member, or a professional, sharing your thoughts and 
                    feelings with them will reduce your stress and can help relieve the emotional weight you may be carrying.
                </p>
                <p>
                    Seek for Professional Help<br><br>
                    Therapists or doctors will be helpful to provide support, resources, and therapy to help you work through your emotions.
                </p>
                <p>
                    Need Immediate Help?
                    <a onclick="closeModal('modal')" href="#support">Find local support here</a>
                </p>
            </div>
        </div>
    </div>

    <div class="desc" id="desc" data-aos="fade-up" data-aos-duration="1000">
        <h2>About Depression</h2>
        <p>
            Depression is a mental health condition that affects a person's mood, thoughts, and overall functioning. 
            When you get depressed, you will feel sadness, hopelessness, and a loss of interest in pleasure in activities that used to be bringing joy. 
            Depression affects your part of life because it will affect your concentration, sleep, eat, and even manage everyday tasks.
        </p>
    </div>
    
    <div class="medication" id="medication" data-aos="fade-up" data-aos-duration="1000">
        <h2>Find Your Medication</h2>
        <p>
            Going through depression is not easy, but finding the right medication for depression (Antidepressants) can be a vital step toward recovery. 
            With various options available, it's essential to understand what works best for you.
        </p>
        <h3>Selective Serotonin Reuptake Inhibitors (SSRIs)</h3>
        <p>
            These medications increase serotonin levels in the brain, which may help improve mood.<br>
            Examples:
            <ul>
                <li>Fluoxetine (Prozac)</li>
                <li>Sertraline (Zoloft)</li>
                <li>Citalopram (Celexa)</li>
            </ul>
            Common side effects:
            <ul>
                <li>Nausea</li>
                <li>Insomnia and drowsiness</li>
                <li>Decreased libido</li>
                <li>Excessive sweating</li>
                <li>Loss of appetite</li>
                <li>Dizziness</li>
            </ul>
        </p>
        <h3>Serotonin-Norepinephrine Reuptake Inhibitors (SNRIs)</h3>
        <p>
            SNRIs affect both serotonin and norepinephrine, neurotransmitters that play a role in mood regulation.<br>
            Examples:
            <ul>
                <li>Venlafaxine (Effexor)</li>
                <li>Duloxetine (Cymbalta)</li>
            </ul>
            Common side effects:
            <ul>
                <li>Nausea</li>
                <li>Headache</li>
                <li>Increased blood pressure</li>
                <li>Dizziness</li>
            </ul>
        </p>
        <h3>Tricyclic Antidepressants (TCAs)</h3>
        <p>
            TCAs are older antidepressants that may have more side effects compared to SSRIs and SNRIs, but they can still be useful in some cases.<br>
            Examples:
            <ul>
                <li>Amitriptyline</li>
                <li>Nortriptyline (Pamelor)</li>
            </ul>
            Common side effects:
            <ul>
                <li>Drowsiness</li>
                <li>Weight gain</li>
                <li>Digestive issues</li>
                <li>Difficulty urinating</li>
            </ul>
        </p>
        <h3>IMPORTANT</h3>
        <ul>
            <li>Combining medications should be closely monitored by a healthcare provider to avoid harmful interactions.</li>
            <li>Some medications may require dosage adjustments or changes if side effects are problematic.</li>
            <li>Treatment is often most effective when combined with psychotherapy (e.g., Cognitive Behavioral Therapy - CBT), as well as lifestyle changes that support mental health.</li>
        </ul>
    </div>
    
    <div class="support" id="support" data-aos="fade-up" data-aos-duration="1000">
        <h3>Find Local Support</h3>
        <p>Emergency Contact Number: <a href="tel:112">112</a></p>
        <p>Or reach us through <a href="mailto:calmcorner@gmail.com">calmcorner@gmail.com</a></p>
    </div>

    <div class="footer">
        <div class="subscribe">
            <form action="https://formspree.io/f/mvgornez" method="POST">
            <p>Subscribe to Our Newsletter</p>
            <input type="email" name="Email" placeholder="Enter your email address" required="required">
            <button type="submit">Subscribe</button></form>
        </div>
        <div class="copyright">
            <i class="fa-regular fa-copyright"></i> Copyright 2024 | Calm Corner | A JGJ Company
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/@emailjs/browser@4/dist/email.min.js"></script>
    <script src="result.js"></script>
    <script src="navbar.js"></script>
    <script>
        function getQueryParam(param) {
            const urlParams = new URLSearchParams(window.location.search);
            return urlParams.get(param);
        }
        const score = getQueryParam('score');        
        const resultName = document.getElementById("resultName");
        const resultDiagnosis = document.getElementById("resultDiagnosis");
        if (score >= 0 && score <= 5) {
            resultName.innerText = "Minimal Depression";
            resultDiagnosis.innerText = "few to no";
        } else if (score >= 6 && score <= 14) {
            resultName.innerText = "Mild Depression";
            resultDiagnosis.innerText = "mild";
        } else if (score >= 15 && score <= 23) {
            resultName.innerText = "Moderate Depression";
            resultDiagnosis.innerText = "moderate";
        } else if (score >= 24 && score <= 33) {
            resultName.innerText = "Moderately Severe Depression";
            resultDiagnosis.innerText = "moderately severe";
        } else if (score >= 34 && score <= 40) {
            resultName.innerText = "Severe Depression";
            resultDiagnosis.innerText = "severe";
        } else {
            resultName.innerText = "INVALID";
            resultDiagnosis.innerText = "INVALID";
        };

        (function(){
            emailjs.init("DSKLpqNRo9PPax88p");
        })();
            document.getElementById("sendResult").addEventListener("submit", function(event) {
            event.preventDefault();
            const userEmail = document.getElementById("userEmail").value;
            const resultDiagnosisText = resultDiagnosis.innerText;
            const resultNameText = resultName.innerText;
            const resultMessage = `Your result is: ${resultNameText} with ${resultDiagnosisText} symptoms of depression.`;
            document.getElementById("emailResult").value = resultMessage;
            emailjs.send("service_3ef61en", "template_vwdpy7o", {
                user_email: userEmail,
                message: resultMessage
            })
            .then(function(response) {
                console.log("SUCCESS!", response.status, response.text);
                alert("Results sent to your email!");
                document.getElementById("userEmail").value = "";
            }, function(error) {
                console.log("FAILED!", error);
                alert("Failed to send results. Please try again.");
            });
        });
    </script>
</body>
</html>