<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Result</title>
    <link rel="icon" type="image/x-icon" href="logo.ico">
    <link href='https://fonts.googleapis.com/css?family=Montserrat' rel='stylesheet'>
    <link rel="stylesheet" href="result.css">
    <script src="https://kit.fontawesome.com/e5693bed51.js" crossorigin="anonymous"></script>
</head>
<body>
    <div class="nav">
        <img src="logo.png">
        <b>Calm Corner</b>
        <div class="nav-menu"><a href="index.html">Home</a></div>
        <div class="nav-menu"><a href="#">Mood Tracker</a></div>
        <div class="nav-menu"><a href="challenge.html">Weekly Challenges</a></div>
        <div class="nav-menu"><a href="sharestory.html">Share a Story</a></div>
        <i class="fa-solid fa-bars" id="bar-icon"></i>
    </div>

    <div class="dropdown" id="dropdown-menu">
        <ul>
            <li><a href="index.html">Home</a></li>
            <li><a href="#">Mood Tracker</a></li>
            <li><a href="challenge.html">Weekly Challenges</a></li>
            <li><a href="sharestory.html">Share a Story</a></li>
        </ul>
    </div>

    <div class="title">
        <h2>Your Result for ADHD Test</h2>
        <div class="result-title" id="resultName">???</div>
        <p>
            Based on the result of your screening, you are diagnosed with <span id="resultDiagnosis">???</span> symptoms of ADHD. 
            Please note that this is not a final diagnosis. A further consultation with your doctor or therapist is encouraged.
        </p>
        <form id="sendResult" class="send-result-form">
            <input type="email" id="userEmail" placeholder="Enter your email address" required><br>
            <input type="hidden" id="emailResult">
            <button type="submit">Send Results</button>
        </form>
    </div>

    <div class="learn-more">
        <h1>What to do next?</h1>
        <a class="learn-more-btn" href="#desc">Learn more about ADHD</a><br>
        <a class="learn-more-btn" href="#medication">Find a suitable medication</a><br>
        <a class="learn-more-btn" href="#support">Find local support</a><br>
        <a class="learn-more-btn" onclick="openModal('modal')">I don't want to live, but I don't want to die</a>
    </div>

    <div id="modal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeModal('modal')">&times;</span>
            <div class="modal-text">
                <h2>Crisis Support and Resources</h2>
                <p>
                    Talk to Someone You Trust<br><br>
                    Whether it's a friend, family member, or a professional, sharing your thoughts and 
                    feelings with them will reduce your stress and can help relieve the emotional weight you may be carrying.
                </p>
                <p>
                    Seek for Professional Help<br><br>
                    Therapists or doctors will be helpful to provide support, resources, and therapy to help you work through your emotions.
                </p>
                <p>
                    Need Immediate Help?
                    <a onclick="closeModal('modal')" href="#support">Find local support here</a>
                </p>
            </div>
        </div>
    </div>

    <div class="desc" id="desc">
        <h2>About ADHD</h2>
        <p>
            Attention Deficit/Hyperactivity Disorder (ADHD) is a neurodevelopmental disorder characterized by persistent patterns of inattention, hyperactivity, 
            and impulsivity that can interfere with functioning or development. Symptoms may include difficulty focusing, excessive fidgeting, trouble organizing tasks, 
            and impulsive decision-making. ADHD can affect children and often continues into adulthood, impacting academic performance, work, and relationships.
        </p>
    </div>
    
    <div class="medication" id="medication">
        <h2>Find Your Medication</h2>
        <p>
            Going through ADHD is not easy, but finding the right medication for anxiety (Anxiolytics) can be a vital step toward recovery. 
            With various options available, it's essential to understand what works best for you.
        </p>
        <h3>Stimulants</h3>
        <p>
            Stimulant medications are the most commonly prescribed drugs for ADHD. They work by increasing dopamine and norepinephrine levels in the brain.<br>
            Examples:
            <ul>
                <li>Methylphenidate (Ritalin, Concerta)</li>
                <li>Amphetamine salts (Adderall, Vyvanse)</li>
            </ul>
            Common side effects:
            <ul>
                <li>Insomnia</li>
                <li>Loss of appetite</li>
                <li>Anxiety</li>
                <li>Dizziness</li>
                <li>Increased heart rate</li>
                <li>Irritability</li>
            </ul>
        </p>
        <h3>Non-Stimulants</h3>
        <p>
            If stimulants are not effective or cause unwanted side effects, non-stimulant medications may be used.<br>
            Examples:
            <ul>
                <li>Atomoxetine (Strattera)</li>
                <li>Guanfacine (Intuniv)</li>
            </ul>
            Common side effects:
            <ul>
                <li>Drowsiness</li>
                <li>Loss of appetite</li>
                <li>Dizziness</li>
                <li>Sleep disturbances</li>
            </ul>
        </p>
        <h3>IMPORTANT</h3>
        <ul>
            <li>Combining medications should be closely monitored by a healthcare provider to avoid harmful interactions.</li>
            <li>Some medications may require dosage adjustments or changes if side effects are problematic.</li>
            <li>Treatment is often most effective when combined with psychotherapy (e.g., Cognitive Behavioral Therapy - CBT), as well as lifestyle changes that support mental health.</li>
        </ul>
    </div>
    
    <div class="support" id="support">
        <h3>Find Local Support</h3>
        <p>Emergency Contact Number: <a href="tel:112">112</a></p>
        <p>Or reach us through <a href="mailto:calmcorner@gmail.com">calmcorner@gmail.com</a></p>
    </div>

    <div class="footer">
        <div class="subscribe">
            <form action="https://formspree.io/f/mvgornez" method="POST">
            <p>Subscribe to Our Newsletter</p>
            <input type="email" name="Email" placeholder="Enter your email address" required="required">
            <button type="submit">Subscribe</button></form>
        </div>
        <div class="copyright">
            <i class="fa-regular fa-copyright"></i> Copyright 2024 | Calm Corner | A JGJ Company
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/@emailjs/browser@4/dist/email.min.js"></script>
    <script>
        const barIcon = document.getElementById("bar-icon");
        const dropdownMenu = document.getElementById("dropdown-menu");
        window.addEventListener("resize", function() {
            if (window.innerWidth > 800) {
                dropdownMenu.style.display = "none";
                barIcon.classList.remove("fa-times");  
                barIcon.classList.add("fa-bars");
                barIcon.classList.remove("open");
            }
        });

        barIcon.addEventListener("click", function() {
            if (dropdownMenu.style.display === "none" || dropdownMenu.style.display === "") {
                dropdownMenu.style.display = "block";
                barIcon.classList.remove("fa-bars");
                barIcon.classList.add("fa-times");
                barIcon.classList.add("open");
            } else {
                dropdownMenu.style.display = "none";
                barIcon.classList.add("fa-bars");
                barIcon.classList.remove("fa-times");
                barIcon.classList.remove("open");
            }
        });

        document.querySelectorAll(".dropdown-btn").forEach(button => {
            button.addEventListener("click", function() {
                const answer = this.parentElement.nextElementSibling;
                answer.classList.toggle("show");
            });
        });

        function getQueryParam(param) {
            const urlParams = new URLSearchParams(window.location.search);
            return urlParams.get(param);
        }
        const score = getQueryParam('score');        
        const resultName = document.getElementById("resultName");
        const resultDiagnosis = document.getElementById("resultDiagnosis");
        if (score >= 0 && score <= 5) {
            resultName.innerText = "Minimal ADHD";
            resultDiagnosis.innerText = "few to no";
        } else if (score >= 6 && score <= 14) {
            resultName.innerText = "Mild ADHD";
            resultDiagnosis.innerText = "mild";
        } else if (score >= 15 && score <= 23) {
            resultName.innerText = "Moderate ADHD";
            resultDiagnosis.innerText = "moderate";
        } else if (score >= 24 && score <= 33) {
            resultName.innerText = "Moderately Severe ADHD";
            resultDiagnosis.innerText = "moderately severe";
        } else if (score >= 34 && score <= 40) {
            resultName.innerText = "Severe ADHD";
            resultDiagnosis.innerText = "severe";
        } else {
            resultName.innerText = "INVALID";
            resultDiagnosis.innerText = "INVALID";
        };

        document.querySelectorAll(".learn-more-btn").forEach(link => {
            link.addEventListener("click", function(event) {
                event.preventDefault();
                const targetId = this.getAttribute("href");
                const targetElement = document.querySelector(targetId);
                targetElement.scrollIntoView({behavior:"smooth"});
            });
        });

        function openModal(modalId) {
            document.getElementById(modalId).style.display = "block";
            document.body.style.overflow = "hidden";
            document.addEventListener("keydown", function escListener(event) {
                if (event.key === "Escape") {
                    closeModal(modalId);
                    document.removeEventListener("keydown", escListener); 
                }
            });
        };
        function closeModal(modalId) {
            document.getElementById(modalId).style.display = "none";
            document.body.style.overflow = "auto";
        };

        (function(){
            emailjs.init("DSKLpqNRo9PPax88p");
        })();
        document.getElementById("sendResult").addEventListener("submit", function(event) {
            event.preventDefault();
            const userEmail = document.getElementById("userEmail").value;
            const resultDiagnosisText = resultDiagnosis.innerText;
            const resultNameText = resultName.innerText;
            const resultMessage = `Your result is: ${resultNameText} with ${resultDiagnosisText} symptoms of ADHD.`;
            document.getElementById("emailResult").value = resultMessage;
            emailjs.send("service_3ef61en", "template_vwdpy7o", {
                user_email: userEmail,
                message: resultMessage
            })
            .then(function(response) {
                console.log("SUCCESS!", response.status, response.text);
                alert("Results sent to your email!");
                document.getElementById("userEmail").value = "";
            }, function(error) {
                console.log("FAILED!", error);
                alert("Failed to send results. Please try again.");
            });
        });
    </script>
</body>
</html>